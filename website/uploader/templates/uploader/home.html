{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Uploader</title>
</head>
<body>
    <h1>Upload Video</h1>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Upload</button>
    </form>

    <h1>Video List</h1>
    <ul>
        {% for video in videos %}
        <li>{{ video.v_file.name }} - Processed: {{ video.processed_status }}</li>
        {% if video.processed_status %}
        <video width="640" height="360" controls>
            <source src="{{ video.v_file.url }}" type="video/mp4">
            {% for subtitle in video.subtitle_set.all %}
            <track src="{{ subtitle.file.url }}" kind="subtitles" srclang="{{ subtitle.language }}" label="{{ subtitle.language }}">
            {% endfor %}
            Your browser does not support the video tag.
        </video>
        {% endif %}
        </li>
        {% endfor %}
    </ul>
</body>
</html>
{% endblock %}
